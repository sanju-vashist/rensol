<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Overlay Demo</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #007bff;
            --accent-color: #28a745;
            --secondary-color: #dc3545;
            --user-bg: #e6f2ff;
            --ai-bg: #f0f0f0;
            --white: #fff;
            --bg-light: #f8f9fa;
            --text-primary: #333;
            --border-light: #ddd;
            --border-radius: 8px;
            --shadow-medium: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .demo-content {
            text-align: center;
            color: white;
            font-size: 24px;
        }

        /* AI ASSISTANT BUTTONS */
        .container-ai {
            position: fixed;
            right: 20px;
            bottom: 20px;
            display: flex;
            gap: 10px;
            z-index: 1000;
        }

        #micButton,
        #chatButton,
        #stopButton {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            transition: var(--transition);
            background: var(--accent-color);
            color: white;
            border: none;
            cursor: pointer;
            box-shadow: var(--shadow-medium);
        }

        #chatButton:hover,
        #micButton:hover,
        #stopButton:hover {
            background: var(--primary-color);
            transform: scale(1.1);
        }

        #micButton.listening {
            background: var(--secondary-color);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
        }

        /* CHAT OVERLAY */
        #chatOverlay {
            display: none;
            position: fixed;
            top: 20px;
            right: 20px;
            width: 25vw;
            height: 30vh;
            min-width: 300px;
            min-height: 250px;
            background: var(--white);
            border-radius: var(--border-radius);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            z-index: 1001;
            flex-direction: column;
            overflow: hidden;
            border: 1px solid var(--border-light);
        }

        #chatOverlay.show {
            display: flex;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(100%);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .chat-header {
            background: var(--primary-color);
            color: var(--white);
            padding: 10px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: bold;
            font-size: 14px;
        }

        .chat-close {
            background: none;
            border: none;
            color: var(--white);
            font-size: 18px;
            cursor: pointer;
            padding: 0;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .chat-close:hover {
            opacity: 0.8;
        }

        #chatContainer {
            flex: 1;
            padding: 10px;
            overflow-y: auto;
            background: #fafafa;
            font-size: 12px;
        }

        .message {
            margin: 0.3rem 0;
            padding: 0.5rem;
            border-radius: 6px;
            max-width: 85%;
            word-wrap: break-word;
            font-size: 11px;
            line-height: 1.4;
        }

        .user-message {
            align-self: flex-end;
            background: var(--user-bg);
            margin-left: auto;
            text-align: right;
        }

        .ai-message {
            align-self: flex-start;
            background: var(--ai-bg);
            margin-right: auto;
        }

        .chat-input-container {
            display: flex;
            padding: 8px;
            border-top: 1px solid var(--border-light);
            background: var(--white);
            gap: 5px;
        }

        #chatInput {
            flex: 1;
            padding: 6px 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 12px;
            outline: none;
        }

        #chatInput:focus {
            border-color: var(--primary-color);
        }

        #sendButton {
            background: var(--primary-color);
            color: var(--white);
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: var(--transition);
        }

        #sendButton:hover {
            background: #0056b3;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            #chatOverlay {
                width: 90vw;
                height: 40vh;
                top: 10px;
                right: 5vw;
            }
        }

        /* Custom scrollbar for chat */
        #chatContainer::-webkit-scrollbar {
            width: 4px;
        }

        #chatContainer::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        #chatContainer::-webkit-scrollbar-thumb {
            background: #ccc;
            border-radius: 2px;
        }

        #chatContainer::-webkit-scrollbar-thumb:hover {
            background: #999;
        }
    </style>
</head>
<body>
    <div class="demo-content">
        <h1>Your Website Content</h1>
        <p>Click the chat button to open the AI assistant</p>
    </div>

    <!-- AI Assistant Buttons -->
    <div class="container-ai">
        <button id="micButton">
            <i class="fas fa-microphone"></i>
        </button>
        <button id="chatButton">
            <i class="fas fa-comments"></i>
        </button>
        <button id="stopButton">
            <i class="fas fa-stop"></i>
        </button>
    </div>

    <!-- Chat Overlay -->
    <div id="chatOverlay">
        <div class="chat-header">
            <span>AI Assistant</span>
            <button class="chat-close" id="closeChatButton">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div id="chatContainer"></div>
        <div class="chat-input-container">
            <input type="text" id="chatInput" placeholder="Type your message..." />
            <button id="sendButton">Send</button>
        </div>
    </div>

    <script>
        const API_KEY = 'AIzaSyDQiYbOiipZKKWz5Ar37u55FcjtatEWotA';
        const API_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent';

        const knowledgeBase = 
            "Rensol Technologies is a global IT services company specializing in software development, digital transformation, and enterprise solutions. " +
            "Founded with a focus on delivering innovative and customized technology services, Rensol serves clients across multiple industries including healthcare, finance, education, and retail. " +
            "The company emphasizes agile methodologies, cloud computing, and cutting-edge technologies to drive business growth and operational efficiency." +
            "\n\n" +
            "Core Competencies: " +
            "1. Custom Software Development - Tailored software solutions to meet unique business needs. " +
            "2. Mobile & Web App Development - Cross-platform apps with a focus on performance and user experience. " +
            "3. Cloud Solutions - Migration, deployment, and management on AWS, Azure, and Google Cloud. " +
            "4. Data Analytics & AI - Leveraging data-driven insights and AI models to enhance decision-making. " +
            "5. IT Consulting & Support - End-to-end IT services including system integration and maintenance." +
            "\n\n" +
            "Key Projects: " +
            "1. Healthcare Management System - A comprehensive platform for patient records, appointments, and billing. " +
            "2. E-commerce Platform - Scalable online store with integrated payment gateways and inventory management. " +
            "3. Learning Management System - An interactive platform for educational content and assessments. " +
            "4. Financial Analytics Tool - Real-time dashboards for financial performance tracking and forecasting." +
            "\n\n" +
            "Achievements: " +
            "Rensol Technologies has been recognized for excellence in client satisfaction, timely delivery, and innovative solutions. " +
            "The company continuously invests in R&D to stay ahead in technology trends and maintain competitive advantage." +
            "\n\n" +
            "Projects: " +
            "1. Saanjavni: A comprehensive medical information app with biometric registration, family medical history, emergency access, and monetization features. Created using Flutter and Firebase. " +
            "2. Lafda: An anonymous chatting app that allows users to interact in group chats and share thoughts freely. " +
            "2. Dowry Calculator: A fun app that calculates a hypothetical dowry amount based on user qualifications. " +
            "4. The Normal app: A simple app that steals your data and sends it to server without even knowing and its aim is to educate how easy is to steal your data and how chiness app may do it.created using react native and supbase " +
            "\n\n" +
            "Work Culture & Vision: " +
            "Rensol is committed to fostering a collaborative work culture, empowering teams, and driving digital innovation worldwide. " +
            "They focus on continuous learning, employee growth, and building sustainable technology ecosystems for clients globally.";

        // Chat functionality
        const chatOverlay = document.getElementById('chatOverlay');
        const chatContainer = document.getElementById('chatContainer');
        const chatInput = document.getElementById('chatInput');
        const sendButton = document.getElementById('sendButton');
        const chatButton = document.getElementById('chatButton');
        const closeChatButton = document.getElementById('closeChatButton');

        // Open chat overlay
        chatButton.addEventListener('click', function() {
            chatOverlay.classList.add('show');
            chatInput.focus();
        });

        // Close chat overlay
        closeChatButton.addEventListener('click', function() {
            chatOverlay.classList.remove('show');
        });

        // Send message function
        async function sendMessage() {
            const userMessage = chatInput.value.trim();
            if (!userMessage) return;

            // Display user message
            const userMsgEl = document.createElement('div');
            userMsgEl.className = 'message user-message';
            userMsgEl.textContent = userMessage;
            chatContainer.appendChild(userMsgEl);

            chatInput.value = '';
            chatContainer.scrollTop = chatContainer.scrollHeight;

            const prompt = `
You are an AI assistant with access to the following knowledge base:
"""
${knowledgeBase}
"""

Please answer the user's question **based only on the information in the knowledge base replay in a proper format and to any word of appritation like hello and hi reply with anthusisem**.
If the answer is not in the knowledge base, respond with "I am not able to understand or unable to help you with this please ask anything else."

User's question: ${userMessage}
`;

            try {
                const response = await fetch(`${API_URL}?key=${API_KEY}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: prompt }] }]
                    })
                });

                if (!response.ok) throw new Error('API request failed');

                const data = await response.json();
                const aiResponse = data.candidates[0].content.parts[0].text;

                // Display AI response
                const aiMsgEl = document.createElement('div');
                aiMsgEl.className = 'message ai-message';
                aiMsgEl.textContent = aiResponse;
                chatContainer.appendChild(aiMsgEl);
            } catch (error) {
                console.error('Error:', error);
                const aiMsgEl = document.createElement('div');
                aiMsgEl.className = 'message ai-message';
                aiMsgEl.textContent = 'Error: Failed to get a response from AI';
                chatContainer.appendChild(aiMsgEl);
            }

            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        // Event listeners
        sendButton.addEventListener('click', sendMessage);
        chatInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
    </script>
</body>
</html>